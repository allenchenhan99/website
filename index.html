<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Website</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/vue@3"></script>
</head>
<body>
    <div id="app">
        <!-- Sidebar toggle button -->
        <button class="open-btn" @click="toggleSidebar(true)">&#9776;</button>

        <!-- Sidebar -->
        <div class="sidebar" :class="{ active: sidebarOpen }">
            <button class="close-btn" @click="toggleSidebar(false)">&times;</button>
            <ul>
                <li>
                    <a href="index.html">
                        <img src="assets/images/home.png" alt="Home Icon" class="icon">
                        Homepage
                    </a>
                </li>
                <li>
                    <a href="profile.html" target="_blank">
                        <img src="assets/images/profile.png" alt="Profile Icon" class="icon">
                        Profile
                    </a>
                </li>
                <li>
                    <a href="cv.html" target="_blank">
                        <img src="assets/images/CV.png" alt="CV Icon" class="icon">
                        CV
                    </a>
                </li>
                <li>
                    <a href="music.html">
                        <img src="assets/images/Music.png" alt="Music Icon" class="icon">
                        Music
                    </a>
                </li>
                <li>
                    <a href="perfume.html" target="_blank">
                        <img src="assets/images/Perfume.png" alt="Perfume Icon" class="icon">
                        Perfume
                    </a>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Typing Effect -->
            <div class="ascii-art" id="ascii-art"></div>
        </div>
    </div>

    <script>
        const app = Vue.createApp({
            data() {
                return {
                    sidebarOpen: false,
                    asciiArt: '',
                    currentCharIndex: 0
                };
            },
            mounted() {
                this.loadAsciiArt();
            },
            methods: {
                toggleSidebar(open) {
                    this.sidebarOpen = open;
                },
                loadAsciiArt() {
                    fetch('asciiArt.txt')
                        .then(response => response.text())
                        .then(art => {
                            this.asciiArt = art;
                            this.typeAsciiArt();
                        })
                        .catch(error => console.error('Error loading ASCII art:', error));
                },
                typeAsciiArt() {
                    const target = document.getElementById("ascii-art");
                    const lines = this.asciiArt.split('\n');
                    let currentBlock = 0;
                    
                    // 定義每個區塊的寬度順序
                    const blockWidths = [
                        10, 8, 8, 8, 9, 11, 8, 4, 9, 9,  // 第一行的區塊
                        11, 9, 4, 8, 8, 8, 8, 9, 10, 8, 8, 4, 8, 8, 9, 9  // 第二行的區塊
                    ];
                    
                    const displayNextBlock = () => {
                        if (currentBlock < blockWidths.length) {
                            const width = blockWidths[currentBlock];
                            let blockContent = '';
                            
                            // 確定當前區塊的起始位置
                            let startPos = 0;
                            if (currentBlock < 10) {
                                // 第一行的區塊
                                for (let i = 0; i < currentBlock; i++) {
                                    startPos += blockWidths[i];
                                }
                            } else {
                                // 第二行的區塊，重新從0開始計算
                                for (let i = 10; i < currentBlock; i++) {
                                    startPos += blockWidths[i];
                                }
                            }
                            
                            // 如果是第二行的區塊，需要調整起始行
                            const startLine = currentBlock < 10 ? 0 : 9;
                            
                            // 構建區塊內容（6行）
                            for (let i = 0; i < 6; i++) {
                                const line = lines[startLine + i];
                                blockContent += line.substr(startPos, width) + '\n';
                            }
                            
                            // 添加區塊到顯示區域
                            if (currentBlock === 0) {
                                target.textContent = blockContent;
                            } else if (currentBlock === 10) {
                                // 添加三個換行後再繼續
                                target.textContent += '\n\n\n' + blockContent;
                            } else {
                                // 將新區塊添加到對應行的末尾
                                const currentLines = target.textContent.split('\n');
                                const newLines = blockContent.split('\n');
                                
                                for (let i = 0; i < 6; i++) {
                                    if (currentBlock < 10) {
                                        currentLines[i] = (currentLines[i] || '') + newLines[i];
                                    } else {
                                        currentLines[i + 9] = (currentLines[i + 9] || '') + newLines[i];
                                    }
                                }
                                target.textContent = currentLines.join('\n');
                            }
                            
                            currentBlock++;
                            setTimeout(displayNextBlock, 100);
                        }
                    };

                    displayNextBlock();
                }
            }
        });

        app.mount("#app");
    </script>
</body>
</html>
